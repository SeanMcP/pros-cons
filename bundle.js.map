{
  "version": 3,
  "sources": ["main.ts"],
  "sourcesContent": ["type Type = \"pros\" | \"cons\";\n\ntype Item = {\n  id: string;\n  text: string;\n  weight: number;\n};\n\ntype Store = {\n  autoSave: boolean;\n  pros: Item[];\n  cons: Item[];\n};\n\ntype Lists = {\n  pros: HTMLOListElement;\n  cons: HTMLOListElement;\n};\n\nconst lists: Lists = {\n  cons: document.getElementById(\"cons\") as HTMLOListElement,\n  pros: document.getElementById(\"pros\") as HTMLOListElement,\n};\n\nconst initialState: Readonly<Store> = {\n  autoSave: false,\n  pros: [],\n  cons: [],\n};\n\nlet store: Store = copy(initialState);\n\nconst dataFromStorage = localStorage.getItem(\"pros-cons\");\nif (dataFromStorage) {\n  store = JSON.parse(dataFromStorage);\n}\n\ndocument\n  .querySelector('[name=\"auto-save\"]')\n  ?.addEventListener(\"change\", (event) => {\n    event.preventDefault();\n\n    store.autoSave = (event.target as HTMLInputElement).checked;\n\n    attemptSync();\n  });\n\ndocument.getElementById(\"save\")?.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n\n  syncWithStorage();\n});\n\ndocument.getElementById(\"factory-reset\")?.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n\n  if (\n    confirm(\"Do you want to reset your pros/cons list? This cannot be undone.\")\n  ) {\n    store = copy(initialState);\n    update(true);\n  }\n});\n\nfunction copy(value: any) {\n  return JSON.parse(JSON.stringify(value));\n}\n\nfunction syncWithStorage() {\n  localStorage.setItem(\"pros-cons\", JSON.stringify(store));\n}\n\nfunction attemptSync(forceSync = false) {\n  if (forceSync || store.autoSave) syncWithStorage();\n}\n\nfunction renderItems() {\n  const weightTotal = {\n    pros: 0,\n    cons: 0,\n  };\n  const keys: Type[] = [\"pros\", \"cons\"];\n  keys.forEach((type) => {\n    const items = store[type];\n\n    lists[type].textContent = \"\";\n    items.forEach((item) => {\n      weightTotal[type] += item.weight;\n      const li = document.createElement(\"li\");\n      li.classList.add(\"p-2\", \"flex\", \"justify-between\");\n      const span = document.createElement(\"span\");\n      span.textContent = item.text;\n      li.appendChild(span);\n\n      const controlsDiv = document.createElement(\"div\");\n      li.appendChild(controlsDiv);\n\n      const weightInput = document.createElement(\"input\");\n      weightInput.setAttribute(\"aria-label\", \"Weight\");\n      weightInput.type = \"number\";\n      weightInput.value = String(item.weight);\n      weightInput.addEventListener(\"input\", (event) => {\n        event.preventDefault();\n        // @ts-ignore\n        setWeight(item.id, type, Number(event.target.value));\n      });\n      controlsDiv.appendChild(weightInput);\n\n      const upButton = document.createElement(\"button\");\n      upButton.textContent = \"Up\";\n      upButton.addEventListener(\"click\", (event) => {\n        event.preventDefault();\n        move(item.id, type, \"up\");\n      });\n      controlsDiv.appendChild(upButton);\n\n      const downButton = document.createElement(\"button\");\n      downButton.textContent = \"Down\";\n      downButton.addEventListener(\"click\", (event) => {\n        event.preventDefault();\n        move(item.id, type, \"down\");\n      });\n      controlsDiv.appendChild(downButton);\n\n      const deleteButton = document.createElement(\"button\");\n      deleteButton.textContent = \"Delete\";\n      deleteButton.addEventListener(\"click\", (event) => {\n        event.preventDefault();\n        remove(item.id, type);\n      });\n      controlsDiv.appendChild(deleteButton);\n\n      lists[type].appendChild(li);\n    });\n    // @ts-ignore\n    document.getElementById(`${type}-total`).textContent = weightTotal[type];\n  });\n  let heavier = \"\";\n  if (weightTotal.cons > weightTotal.pros) {\n    heavier = \"cons\";\n  } else if (weightTotal.cons < weightTotal.pros) {\n    heavier = \"pros\";\n  }\n  document.querySelectorAll(\".list-container\").forEach((node) => {\n    if (heavier && node.classList.contains(`--${heavier}`)) {\n      node.classList.add(\"border-green-200\");\n    } else {\n      node.classList.remove(\"border-green-200\");\n    }\n    // @ts-ignore\n    // node.dataset.state = node.classList.contains(`--${heavier}`)\n    //   ? \"heavier\"\n    //   : \"\";\n  });\n  // if (heavier) {\n  //   // @ts-ignore\n  //   document.querySelector(`.--${heavier}`).dataset.state = \"heavier\";\n  // }\n}\n\nfunction update(forceSync = false) {\n  renderItems();\n  attemptSync(forceSync);\n}\n\nupdate();\n\ndocument.querySelectorAll('form[name=\"add\"]').forEach((form) => {\n  form.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    const value = String(\n      new FormData(event.target as HTMLFormElement).get(\"item\")\n    );\n\n    if (value) {\n      add(value, (form as HTMLElement).dataset.parent as Type);\n    }\n\n    (form as HTMLFormElement).reset();\n  });\n});\n\nfunction add(text: Item[\"text\"], type: Type) {\n  store[type].push({\n    id: String(new Date().getTime()).slice(-5),\n    text,\n    weight: 1,\n  });\n  update();\n}\n\nfunction move(id: string, type: keyof Store, direction: \"up\" | \"down\") {\n  const next = copy(store[type]);\n  const length = next.length;\n  let index = -1;\n  for (let i = 0; i < next.length; i++) {\n    if (next[i].id === id) {\n      index = i;\n      break;\n    }\n  }\n  const [item] = next.splice(index, 1);\n  let nextIndex = index;\n\n  switch (direction) {\n    case \"up\": {\n      if (index === 0) return;\n      nextIndex = index - 1;\n      break;\n    }\n    case \"down\": {\n      if (index === length - 1) return;\n      nextIndex = index + 1;\n      break;\n    }\n  }\n\n  next.splice(nextIndex, 0, item);\n  store[type] = next;\n  update();\n}\n\nfunction remove(id: string, type: Type) {\n  store[type] = store[type].filter((item) => item.id !== id);\n  update();\n}\n\nfunction setWeight(id: string, type: Type, weight: number) {\n  store[type] = store[type].map((item) => {\n    if (item.id === id) {\n      return {\n        ...item,\n        weight,\n      };\n    }\n    return item;\n  });\n  update();\n}\n"],
  "mappings": "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",
  "names": []
}
